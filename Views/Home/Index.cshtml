@{
    ViewData["Title"] = "Dashboard";
}

@if (User.Identity?.IsAuthenticated == true)
{
    <div class="dashboard-header mb-5">
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <h1 class="display-6 fw-semibold mb-2">Welcome back, @User.Identity.Name</h1>
                <p class="text-muted fs-5 mb-0">Here's your attendance overview for today</p>
            </div>
            <div class="text-end text-muted">
                <i class="bi bi-calendar3"></i> @DateTime.Now.ToString("MMMM dd, yyyy")
            </div>
        </div>
    </div>

    <div class="row g-4 mb-5">
        @if (User.IsInRole("Admin"))
        {
            <div class="col-md-3">
                <div class="stat-card stat-card-primary">
                    <div class="stat-icon">
                        <i class="bi bi-book"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value">@ViewBag.TotalCourses</div>
                        <div class="stat-label">Total Courses</div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card stat-card-success">
                    <div class="stat-icon">
                        <i class="bi bi-person-badge"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value">@ViewBag.TotalTeachers</div>
                        <div class="stat-label">Total Teachers</div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card stat-card-info">
                    <div class="stat-icon">
                        <i class="bi bi-people"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value">@ViewBag.TotalStudents</div>
                        <div class="stat-label">Total Students</div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card stat-card-warning">
                    <div class="stat-icon">
                        <i class="bi bi-calendar-check"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value">@ViewBag.TotalEnrollments</div>
                        <div class="stat-label">Total Enrollments</div>
                    </div>
                </div>
            </div>
        }
        else if (User.IsInRole("Teacher"))
        {
            <div class="col-md-4">
                <div class="stat-card stat-card-primary">
                    <div class="stat-icon">
                        <i class="bi bi-book"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value">@ViewBag.MyCourses</div>
                        <div class="stat-label">My Courses</div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="stat-card stat-card-success">
                    <div class="stat-icon">
                        <i class="bi bi-people"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value">@ViewBag.TotalStudents</div>
                        <div class="stat-label">Total Students</div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="stat-card stat-card-info">
                    <div class="stat-icon">
                        <i class="bi bi-calendar-check"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value">@ViewBag.TodaysClasses</div>
                        <div class="stat-label">Classes Today</div>
                    </div>
                </div>
            </div>
        }
        else if (User.IsInRole("Student"))
        {
            <div class="col-md-4">
                <div class="stat-card stat-card-primary">
                    <div class="stat-icon">
                        <i class="bi bi-book"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value">@ViewBag.EnrolledCourses</div>
                        <div class="stat-label">My Courses</div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="stat-card stat-card-success">
                    <div class="stat-icon">
                        <i class="bi bi-graph-up"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value">@ViewBag.AttendanceRate%</div>
                        <div class="stat-label">Attendance Rate</div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="stat-card stat-card-warning">
                    <div class="stat-icon">
                        <i class="bi bi-calendar-week"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value">@ViewBag.TotalAttendance</div>
                        <div class="stat-label">Total Attendance</div>
                    </div>
                </div>
            </div>
        }
    </div>

    <div class="row g-4">
        <div class="col-md-4">
            <div class="action-card">
                <div class="action-card-header">
                    <i class="bi bi-lightning-charge-fill"></i>
                    <h5 class="mb-0">Quick Actions</h5>
                </div>
                <div class="action-card-body">
                    @if (User.IsInRole("Admin") || User.IsInRole("Teacher"))
                    {
                        <a asp-controller="Course" asp-action="Index" class="action-btn">
                            <div class="action-btn-icon bg-primary-subtle">
                                <i class="bi bi-book text-primary"></i>
                            </div>
                            <div class="action-btn-content">
                                <div class="action-btn-title">Manage Courses</div>
                                <div class="action-btn-desc">View and edit courses</div>
                            </div>
                            <i class="bi bi-chevron-right text-muted"></i>
                        </a>
                        <a asp-controller="Attendance" asp-action="Index" class="action-btn">
                            <div class="action-btn-icon bg-success-subtle">
                                <i class="bi bi-check2-square text-success"></i>
                            </div>
                            <div class="action-btn-content">
                                <div class="action-btn-title">Mark Attendance</div>
                                <div class="action-btn-desc">Record student attendance</div>
                            </div>
                            <i class="bi bi-chevron-right text-muted"></i>
                        </a>
                    }
                    @if (User.IsInRole("Admin"))
                    {
                        <a asp-controller="Admin" asp-action="Users" class="action-btn">
                            <div class="action-btn-icon bg-info-subtle">
                                <i class="bi bi-people text-info"></i>
                            </div>
                            <div class="action-btn-content">
                                <div class="action-btn-title">Manage Users</div>
                                <div class="action-btn-desc">Add or remove users</div>
                            </div>
                            <i class="bi bi-chevron-right text-muted"></i>
                        </a>
                    }
                    @if (User.IsInRole("Student"))
                    {
                        <a asp-controller="Student" asp-action="MyCourses" class="action-btn">
                            <div class="action-btn-icon bg-primary-subtle">
                                <i class="bi bi-book text-primary"></i>
                            </div>
                            <div class="action-btn-content">
                                <div class="action-btn-title">My Courses</div>
                                <div class="action-btn-desc">View enrolled courses</div>
                            </div>
                            <i class="bi bi-chevron-right text-muted"></i>
                        </a>
                        <a asp-controller="Student" asp-action="AvailableCourses" class="action-btn">
                            <div class="action-btn-icon bg-success-subtle">
                                <i class="bi bi-plus-circle text-success"></i>
                            </div>
                            <div class="action-btn-content">
                                <div class="action-btn-title">Enroll in Courses</div>
                                <div class="action-btn-desc">Browse available courses</div>
                            </div>
                            <i class="bi bi-chevron-right text-muted"></i>
                        </a>
                        <a asp-controller="Student" asp-action="MyAttendance" class="action-btn">
                            <div class="action-btn-icon bg-info-subtle">
                                <i class="bi bi-calendar-check text-info"></i>
                            </div>
                            <div class="action-btn-content">
                                <div class="action-btn-title">View Attendance</div>
                                <div class="action-btn-desc">Check attendance records</div>
                            </div>
                            <i class="bi bi-chevron-right text-muted"></i>
                        </a>
                    }
                </div>
            </div>
        </div>
        <div class="col-md-8">
            <div class="info-card">
                <div class="info-card-header">
                    <i class="bi bi-info-circle-fill"></i>
                    <h5 class="mb-0">System Overview</h5>
                </div>
                <div class="info-card-body">
                    <div class="info-item">
                        <div class="info-icon bg-primary-subtle">
                            <i class="bi bi-check-circle text-primary"></i>
                        </div>
                        <div class="info-content">
                            <h6>Attendance Tracking</h6>
                            <p>Mark and monitor student attendance in real-time across all courses</p>
                        </div>
                    </div>
                    <div class="info-item">
                        <div class="info-icon bg-success-subtle">
                            <i class="bi bi-graph-up text-success"></i>
                        </div>
                        <div class="info-content">
                            <h6>Analytics & Reports</h6>
                            <p>Generate detailed attendance reports and track performance metrics</p>
                        </div>
                    </div>
                    <div class="info-item">
                        <div class="info-icon bg-info-subtle">
                            <i class="bi bi-shield-check text-info"></i>
                        </div>
                        <div class="info-content">
                            <h6>Secure & Reliable</h6>
                            <p>Role-based access control ensures data security and privacy</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
else
{
    <div class="text-center py-5">
        <i class="bi bi-calendar-check" style="font-size: 5rem; color: #0d6efd;"></i>
        <h1 class="display-4 mt-4">Welcome to Attendance System</h1>
        <p class="lead">Streamline your attendance management with ease</p>
        <div class="mt-4">
            <a asp-controller="Account" asp-action="Login" class="btn btn-primary btn-lg me-2">
                <i class="bi bi-box-arrow-in-right"></i> Login
            </a>
            <a asp-controller="Account" asp-action="Register" class="btn btn-outline-primary btn-lg">
                <i class="bi bi-person-plus"></i> Register
            </a>
        </div>
    </div>
}