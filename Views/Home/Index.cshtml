@{
    ViewData["Title"] = "Dashboard";
}

@if (User.Identity?.IsAuthenticated == true)
{
    <div class="dashboard-header mb-5">
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <h1 class="display-6 fw-semibold mb-2">Welcome back, @User.Identity.Name</h1>
                <p class="text-muted fs-5 mb-0">Here's your attendance overview for today</p>
            </div>
            <div class="text-end text-muted">
                <i class="bi bi-calendar3"></i> @DateTime.Now.ToString("MMMM dd, yyyy")
            </div>
        </div>
    </div>

    <div class="row g-4 mb-5">
        @if (User.IsInRole("Admin"))
        {
            <div class="col-md-3">
                <div class="stat-card stat-card-primary">
                    <div class="stat-icon">
                        <i class="bi bi-book"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value">@ViewBag.TotalCourses</div>
                        <div class="stat-label">Total Courses</div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card stat-card-success">
                    <div class="stat-icon">
                        <i class="bi bi-person-badge"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value">@ViewBag.TotalTeachers</div>
                        <div class="stat-label">Total Teachers</div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card stat-card-info">
                    <div class="stat-icon">
                        <i class="bi bi-people"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value">@ViewBag.TotalStudents</div>
                        <div class="stat-label">Total Students</div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card stat-card-warning">
                    <div class="stat-icon">
                        <i class="bi bi-calendar-check"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value">@ViewBag.TotalEnrollments</div>
                        <div class="stat-label">Total Enrollments</div>
                    </div>
                </div>
            </div>
        }
        else if (User.IsInRole("Teacher"))
        {
            <div class="col-md-4">
                <div class="stat-card stat-card-primary">
                    <div class="stat-icon">
                        <i class="bi bi-book"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value">@ViewBag.MyCourses</div>
                        <div class="stat-label">My Courses</div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="stat-card stat-card-success">
                    <div class="stat-icon">
                        <i class="bi bi-people"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value">@ViewBag.TotalStudents</div>
                        <div class="stat-label">Total Students</div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="stat-card stat-card-info">
                    <div class="stat-icon">
                        <i class="bi bi-calendar-check"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value">@ViewBag.TodaysClasses</div>
                        <div class="stat-label">Classes Today</div>
                    </div>
                </div>
            </div>
        }
        else if (User.IsInRole("Student"))
        {
            <div class="col-md-4">
                <div class="stat-card stat-card-primary">
                    <div class="stat-icon">
                        <i class="bi bi-book"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value">@ViewBag.EnrolledCourses</div>
                        <div class="stat-label">My Courses</div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="stat-card stat-card-success">
                    <div class="stat-icon">
                        <i class="bi bi-graph-up"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value">@ViewBag.AttendanceRate%</div>
                        <div class="stat-label">Attendance Rate</div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="stat-card stat-card-warning">
                    <div class="stat-icon">
                        <i class="bi bi-calendar-week"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value">@ViewBag.TotalAttendance</div>
                        <div class="stat-label">Total Attendance</div>
                    </div>
                </div>
            </div>
        }
    </div>

    <div class="row g-4">
        <div class="col-md-4">
            <div class="action-card">
                <div class="action-card-header">
                    <i class="bi bi-lightning-charge-fill"></i>
                    <h5 class="mb-0">Quick Actions</h5>
                </div>
                <div class="action-card-body">
                    @if (User.IsInRole("Admin") || User.IsInRole("Teacher"))
                    {
                        <a asp-controller="Course" asp-action="Index" class="action-btn">
                            <div class="action-btn-icon bg-primary-subtle">
                                <i class="bi bi-book text-primary"></i>
                            </div>
                            <div class="action-btn-content">
                                <div class="action-btn-title">Manage Courses</div>
                                <div class="action-btn-desc">View and edit courses</div>
                            </div>
                            <i class="bi bi-chevron-right text-muted"></i>
                        </a>
                        <a asp-controller="Attendance" asp-action="Index" class="action-btn">
                            <div class="action-btn-icon bg-success-subtle">
                                <i class="bi bi-check2-square text-success"></i>
                            </div>
                            <div class="action-btn-content">
                                <div class="action-btn-title">Mark Attendance</div>
                                <div class="action-btn-desc">Record student attendance</div>
                            </div>
                            <i class="bi bi-chevron-right text-muted"></i>
                        </a>
                    }
                    @if (User.IsInRole("Admin"))
                    {
                        <a asp-controller="Admin" asp-action="Users" class="action-btn">
                            <div class="action-btn-icon bg-info-subtle">
                                <i class="bi bi-people text-info"></i>
                            </div>
                            <div class="action-btn-content">
                                <div class="action-btn-title">Manage Users</div>
                                <div class="action-btn-desc">Add or remove users</div>
                            </div>
                            <i class="bi bi-chevron-right text-muted"></i>
                        </a>
                    }
                    @if (User.IsInRole("Student"))
                    {
                        <a asp-controller="Student" asp-action="MyCourses" class="action-btn">
                            <div class="action-btn-icon bg-primary-subtle">
                                <i class="bi bi-book text-primary"></i>
                            </div>
                            <div class="action-btn-content">
                                <div class="action-btn-title">My Courses</div>
                                <div class="action-btn-desc">View enrolled courses</div>
                            </div>
                            <i class="bi bi-chevron-right text-muted"></i>
                        </a>
                        <a asp-controller="Student" asp-action="AvailableCourses" class="action-btn">
                            <div class="action-btn-icon bg-success-subtle">
                                <i class="bi bi-plus-circle text-success"></i>
                            </div>
                            <div class="action-btn-content">
                                <div class="action-btn-title">Enroll in Courses</div>
                                <div class="action-btn-desc">Browse available courses</div>
                            </div>
                            <i class="bi bi-chevron-right text-muted"></i>
                        </a>
                        <a asp-controller="Student" asp-action="MyAttendance" class="action-btn">
                            <div class="action-btn-icon bg-info-subtle">
                                <i class="bi bi-calendar-check text-info"></i>
                            </div>
                            <div class="action-btn-content">
                                <div class="action-btn-title">View Attendance</div>
                                <div class="action-btn-desc">Check attendance records</div>
                            </div>
                            <i class="bi bi-chevron-right text-muted"></i>
                        </a>
                    }
                </div>
            </div>
        </div>
        <div class="col-md-8">
            <div class="info-card">
                <div class="info-card-header">
                    <i class="bi bi-info-circle-fill"></i>
                    <h5 class="mb-0">System Overview</h5>
                </div>
                <div class="info-card-body">
                    <div class="info-item">
                        <div class="info-icon bg-primary-subtle">
                            <i class="bi bi-check-circle text-primary"></i>
                        </div>
                        <div class="info-content">
                            <h6>Attendance Tracking</h6>
                            <p>Mark and monitor student attendance in real-time across all courses</p>
                        </div>
                    </div>
                    <div class="info-item">
                        <div class="info-icon bg-success-subtle">
                            <i class="bi bi-graph-up text-success"></i>
                        </div>
                        <div class="info-content">
                            <h6>Analytics & Reports</h6>
                            <p>Generate detailed attendance reports and track performance metrics</p>
                        </div>
                    </div>
                    <div class="info-item">
                        <div class="info-icon bg-info-subtle">
                            <i class="bi bi-shield-check text-info"></i>
                        </div>
                        <div class="info-content">
                            <h6>Secure & Reliable</h6>
                            <p>Role-based access control ensures data security and privacy</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
else
{
    <div class="landing-container">
        <div class="landing-content">
            <div class="landing-logo">
                <svg width="80" height="80" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5"/>
                    <path d="M8 12l2 2 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>
            
            <h1 class="landing-title">Presence</h1>
            <p class="landing-subtitle">Track attendance with elegance.</p>
            
            <div class="landing-actions">
                <a asp-controller="Account" asp-action="Login" class="landing-btn landing-btn-primary">
                    <span>Sign In</span>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5 12h14M12 5l7 7-7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </a>
            </div>
            
            <div class="landing-features">
                <div class="feature-item">
                    <div class="feature-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 11l3 3L22 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <span>Real-time tracking</span>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2M9 11a4 4 0 100-8 4 4 0 000 8zM23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <span>Multi-user roles</span>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M14 2v6h6M16 13H8M16 17H8M10 9H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <span>PDF reports</span>
                </div>
            </div>
        </div>
    </div>
}